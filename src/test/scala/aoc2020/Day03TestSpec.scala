package com.github.nryabykh
package aoc2020

import org.scalatest.Matchers._

class Day03TestSpec extends  AoCTest {
  override val sampleInput = """..##.......
                      |#...#...#..
                      |.#....#..#.
                      |..#.#...#.#
                      |.#...##..#.
                      |..#.##.....
                      |.#.#.#....#
                      |.#........#
                      |#.##...#...
                      |#...##....#
                      |.#..#...#.#""".stripMargin
  override val testInput = """...........#..#.#.###....#.....
                             |...#..#...........#.#...#......
                             |#.....#..#........#...#..##....
                             |..#...##.#.....#.............#.
                             |#.#..#......#.....#....#.......
                             |.....#......#..#....#.....#....
                             |.......#.#..............#......
                             |.....#...#..........##...#.....
                             |...#....#.#...#.#........#...#.
                             |..#.........###.......##...##..
                             |.#....#...........#........#..#
                             |..#.............##.............
                             |..#.##.#....#................#.
                             |.....##.#.......#....#...#.....
                             |......#.#....##................
                             |..#..........###..#..#.#..#....
                             |....#..............#....##..#.#
                             |.#.........#.#....#.#.#....#...
                             |..#.....#......##.#....#.......
                             |..#.#....#..#.#...##....###....
                             |...#......##...#........#.#..#.
                             |.##.#.......##....#............
                             |...##..#.#............#...#.#..
                             |.##...##.#..#..................
                             |..#......##......#......##.....
                             |.....##...#..#...#.........#...
                             |.##.#.....#..#..#.##....##....#
                             |..#.#......#.......##..........
                             |......................#......##
                             |##.#...#.................#.#.#.
                             |......#.#..........#.....##.#..
                             |#.#......#.....#...........#...
                             |.....#...#.......#..#..#.#...#.
                             |...........#......#.#...#......
                             |....##...##...........#......#.
                             |.........#.##..................
                             |......#...#....#......##.##...#
                             |......#...#.#########......#...
                             |.......#.#...#.......#..#......
                             |............#...#...#.###...##.
                             |...........#..........#...#....
                             |...#..#.#................#.#..#
                             |..#....#.....#.............#.#.
                             |....##......#........#....#....
                             |........##...............#....#
                             |........#..#...#..............#
                             |...#....#.#...#..#...#....#.#.#
                             |.........#.......#....##.......
                             |#.##..............#.#........##
                             |......................###......
                             |.........#....##..##....#.#.#..
                             |.#...##.#.#...#....##..#.....#.
                             |....................#.#......#.
                             |.#..#.......................#..
                             |..#..#.............#..#....#...
                             |...#...#..#...#...#.#..#.##....
                             |........#....#...#....#........
                             |.#.....#........#.........#...#
                             |...#......#..#..#..####..#.....
                             |#....#..............#.##.......
                             |.#....#.............##...#.....
                             |....#...#.##........##......#..
                             |##....#...#.......#..#........#
                             |....##........................#
                             |..................#..#.........
                             |..#....#........#..#.......#...
                             |#...#..#....#...##...........#.
                             |.........#..#..#.#.##..........
                             |....#.#..#.....#..#.#.#.#..#.##
                             |##................#.##.....#...
                             |.#.....###..#..#..#.....#....##
                             |...#...........#..........####.
                             |.#.....#....#......#.##..#.#...
                             |..#...##....#................#.
                             |........#.......#......#.#.....
                             |....#.#.#.#....#...#......#..#.
                             |...........#......#..#.........
                             |###...##......##.#..#....##....
                             |##....##.........#..#....###...
                             |#.#.....#....#......#...#..##..
                             |#....##.#..............#.##....
                             |.#........#.#.........#...#....
                             |......................#......#.
                             |........#..#..##.....#..#.#....
                             |..#...###.................#..#.
                             |...#...#............#..........
                             |.##.......#..#.........#....#..
                             |.#..............#....#....##...
                             |...............##..#.#.......##
                             |.#.....#....#...#..#.......#..#
                             |#..#.............#....#......#.
                             |.....#.#......#.........###..#.
                             |.#...#.#...............#....#..
                             |#......#.............#.........
                             |.#.##.#.####...#..#.##..#.....#
                             |.....#......#..#...#.......#...
                             |#........###...#.....#..#.....#
                             |....#.#.....#...#..........#...
                             |...#.#.......#.#......#..#.##..
                             |..#..........#.#..#.......#.#..
                             |#...#.#..............#...###.#.
                             |...#..#...#............###.....
                             |..#..#...#.#............#..#...
                             |.###.#.....................#..#
                             |....#....#..#.....##.##........
                             |#....#....#.#..#.........#.....
                             |.#.....##....#............##..#
                             |#....#.#...#...#..#.#......#...
                             |#.....##.....##.....##.#...##..
                             |...##...#..#..####.#........#..
                             |.........#...#......##..##..#..
                             |..#.....###.#..#..####.#.......
                             |.......#......#...#..##....#...
                             |.#.....#.#.#..#....#...#..##...
                             |..........#.#...#...#.#..#.....
                             |....#.....#........#.....##..#.
                             |..#.#.##.........#...##.....##.
                             |.........#.##....#............#
                             |............##.....#.......#.#.
                             |......#.....#...#..#..###......
                             |##.....#.......#...##.#....#...
                             |...........##......#..##...#.#.
                             |..#.#.#.#...#.......#....#...#.
                             |#.............#.....#.#...###..
                             |##....#.......#.....#..##.#....
                             |...#.......#....#.........##...
                             |......#.......#......##.##.....
                             |..#......#...#.#........#......
                             |....#.#....#.#.##......#.....#.
                             |#......#.........#..#....#.....
                             |........#..#....##.....#.......
                             |#......##....#.##....#......#..
                             |..#.......#............##.....#
                             |...........#...#...........#...
                             |#.......#...#....#....#...#.#.#
                             |..###..#........#........#.....
                             |..#..###...........#.#......#..
                             |.#...........#......#..........
                             |.#.......#.....#.......#.......
                             |..#......##.#............#....#
                             |#..........#.....#.#..#........
                             |.....#...##.##.......#......#..
                             |..........#.....#........#.#.#.
                             |....#......#.....#......#.#....
                             |.........#.#.#..#...##....#...#
                             |.........#.......#...##...#.#..
                             |.##........#...............#...
                             |.......#....#...........##.....
                             |.........###......#.........#.#
                             |......#.......#...#..........#.
                             |...#.#..........##......#...#..
                             |#.......#.#..........#.........
                             |................#..#......#..##
                             |.....#...#....#.#.....#........
                             |#.....#....#...........#....#..
                             |#....#.#..#...##....#...##.#...
                             |...#.....#......#.#....#..#..#.
                             |..#................#...#.#..##.
                             |..........#..............#..#.#
                             |.....##.....#..#.###...........
                             |....#.#......#.#...........#...
                             |.#....#.#.........##.#....#....
                             |.#.#........#........###....#..
                             |##.#................#...#..#...
                             |.......#......##..#.....#..#.#.
                             |...#............#......###...##
                             |#.#...........#.........#......
                             |.....#.#.#.................#...
                             |....#..............#...#.#.....
                             |...#.#.....##..#...............
                             |.#..##...#....##.....###..#....
                             |...............#...#...#.#.###.
                             |.###....#.....#...#.#......#...
                             |...#..#.....#.......#..##.#....
                             |...........#..#....##..#...#...
                             |...#...#..........#.......##.#.
                             |............#.#.......#........
                             |....#.........#.....#..........
                             |...#.###.##..#...##..####..#..#
                             |.#.#...#..#...................#
                             |.....#..#.....##..#............
                             |....#......#...##..#.##........
                             |...#...............#..#.....##.
                             |...#......#.........#.#..##....
                             |.#....#.##.......#......#......
                             |....#.......#....#..........#..
                             |#.#.#....###.#.#.............#.
                             |..##..###........#.#..#.#..#...
                             |......#.#............##.#...###
                             |.........#.#....#####.....##...
                             |............##......#.#..#.....
                             |...#.....#.....###....#........
                             |##..........####.##.#.#........
                             |....................##.....##.#
                             |#.#............#........#......
                             |....#...##.....#......#....#...
                             |...###.#..##..................#
                             |..###......#..............#.#.#
                             |.#...#...........#....#........
                             |....#............#..#..#.#.....
                             |...#.........#.#.........#.####
                             |..#...#...#...#...........#....
                             |...............#.#......##..#..
                             |#....#.#.......#.#..#......#..#
                             |........#.#....#..#...#..#...#.
                             |...#..#.......#...........#....
                             |...........#.......#...........
                             |.#......#................#.....
                             |....#.#.#...#......#..#...#....
                             |................#.#.#....#.....
                             |.........................##..#.
                             |.#...........#............##...
                             |#...............#.....##.#.#..#
                             |.........#.......###....#.....#
                             |....##...#...#.....#..#........
                             |........#.....#..#.#.#...#..#..
                             |......#.......#.#.........#.#..
                             |#......#............#...#....#.
                             |#..##...#..#................#..
                             |.##...#...#.....#.##.......#..#
                             |.......#.##........##..##......
                             |##.#..##...............#.....#.
                             |......#....#..##...#......###.#
                             |#........##..#....#.#......#...
                             |.#......##.#...#.#...#.........
                             |.#.#...#..#.............#......
                             |.##..........#..........#......
                             |.#.....#.....#..............#.#
                             |..#.........#..#.#.....#.#....#
                             |..#.##..............##...#..###
                             |....................#..........
                             |......###..#..#...........#....
                             |..#..........#.......#...#.....
                             |...#......#......#.............
                             |....##..............#.#.....#..
                             |........#.#......#..#........##
                             |.............#...#.#.........##
                             |...###...#..........##.......#.
                             |.#..........#...##..#.#.....#..
                             |##...#.........#...............
                             |......#....#....#.....#.....#..
                             |..........#....#...#...#..#...#
                             |...##....#.#.#..#...##.........
                             |#......#.#...##.###...#....#...
                             |##.......##.#......##..#...#...
                             |......#.............#.##.....##
                             |#.......###....####.#...##....#
                             |..#...#..#.......#..........#..
                             |#.....#..#..#..#.##...###...#..
                             |.....##.#..#..#..#.#....#...#..
                             |..#...#..................##....
                             |....#.#........##..............
                             |#...#.......##...#...#.#.......
                             |..#...#........##....#.#.......
                             |..........###...###...#......#.
                             |#.....#..###...##...##..#..#..#
                             |..#.....##.....#.......##..#.#.
                             |........#........#.........#...
                             |.................#....#.......#
                             |.......#...#.....#...#.#.......
                             |....##...............#...##...#
                             |.##...#................#...#...
                             |.............#.................
                             |.#..#....#....#.#....#.........
                             |.#.#..#..........#.......#.....
                             |.....##.....##...#..#..........
                             |#...#.#.........#......#..#....
                             |........#....#...#....#.#.##...
                             |....#..#........#...#...#......
                             |.#..#.....#.#...#.........#....
                             |.#..#..#...........#..#....#...
                             |....###.............#..#.......
                             |#......#..#..##..........#.#...
                             |#..#..#.##..#...#.#.#..........
                             |....###......#.##.....#....#...
                             |.##..#...#......##.#...........
                             |..#..#.......#.....#.##....#.#.
                             |.......#.#.#........#....##....
                             |..##...#....#...............###
                             |#..##..#...........#.#....##...
                             |...##..#.....................#.
                             |###......#....#....###..#...##.
                             |.........##............#..#...#
                             |..#..........#...#.#.#......#.#
                             |.......#.....##..##......#.##..
                             |#..........#.....##.#..........
                             |#.......#.#...#...#....#.......
                             |#...#.....##.......#.#..#.#.#..
                             |.........#.#.#..#..#...#.###...
                             |.................##...#....#...
                             |###.......#..........##...#....
                             |#.#..#.........#....##.#.......
                             |......#.#.....#........#.......
                             |.......#.#........#......#.#..#
                             |..............#..#...##....#..#
                             |#...........#...##.....#..#.#..
                             |..#....#..#.#.#...#..#....#.#..
                             |...##.#.....#..#...##..#.....#.
                             |..#.#................#........#
                             |......#...#.............#......
                             |.##............#....#...#..#...
                             |....#...#...........#.......#..
                             |.###..#.......#.............#.#
                             |.#.#....#.#...........#.#......
                             |...#.........#.........#..#....
                             |...#..........#.#.....#.#......
                             |.....#........#....##......#...
                             |..#.#.#......#..#.#......#....#
                             |.#.#..#................#.#.....
                             |.#.#.........##...#.......#.#.#
                             |#..#.....#...#..#...........#..
                             |..##......####......#..#....###
                             |#.....###....#.#........#..#..#
                             |..##.#...#.#..##..........#..#.
                             |#.........#.#.............#...#
                             |...#.#...#...#.#.#....##.......
                             |##.##...#.....#...#...........#
                             |....#........#.#.....#.........
                             |.................##..#..##...##
                             |.....##....#...#...#.....#..#..
                             |....#...#........#............#
                             |..#...........##....#...#...##.
                             |.....#......#.........#..##.#..""".stripMargin

  "Trees counter" should "return 7 on sample data" in {
    val calculator = new Day03TreesCalculator(sampleInput, debug=true)
    val result = calculator.cnt(3, 1)
    println(result)
    result should be (7)
  }

  it should "calculate result on test data" in {
    val calculator = new Day03TreesCalculator(testInput, debug=true)
    val result = calculator.cnt(3, 1)
    println(result)
    result should be (242)
  }

  it should "return 336 on sample data with multiple slopes" in {
    val slopes = Seq((1, 1), (3, 1), (5, 1), (7, 1), (1, 2))
    val calculator = new Day03TreesCalculator(sampleInput, debug=true)
    val result = calculator.getProduct(slopes)
    println(result)
    result should be (336)
  }

  it should "calculate result on test data with multiple slopes" in {
    val slopes = Seq((1, 1), (3, 1), (5, 1), (7, 1), (1, 2))
    val calculator = new Day03TreesCalculator(testInput, debug=true)
    val result = calculator.getProduct(slopes)
    println(result)
    result should be (2265549792L)
  }
}
